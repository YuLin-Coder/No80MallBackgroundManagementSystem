<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yxb.cms.dao.DataCleaningMapper" >
  <resultMap id="BaseResultMap" type="com.yxb.cms.domain.vo.DataCleaning" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 14:28:55 CST 2017.
    -->
    <id column="data_id" property="dataId" jdbcType="INTEGER" />
    <result column="data_type" property="dataType" jdbcType="INTEGER" />
    <result column="data_time" property="dataTime" jdbcType="VARCHAR" />
    <result column="data_count" property="dataCount" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 14:28:55 CST 2017.
    -->
    data_id, data_type, data_time, data_count
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 14:28:55 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from cc_data_cleaning
    where data_id = #{dataId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 14:28:55 CST 2017.
    -->
    delete from cc_data_cleaning
    where data_id = #{dataId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.yxb.cms.domain.vo.DataCleaning" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 14:28:55 CST 2017.
    -->
    insert into cc_data_cleaning (data_id, data_type, data_time, 
      data_count)
    values (#{dataId,jdbcType=INTEGER}, #{dataType,jdbcType=INTEGER}, #{dataTime,jdbcType=VARCHAR}, 
      #{dataCount,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.yxb.cms.domain.vo.DataCleaning" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 14:28:55 CST 2017.
    -->
    insert into cc_data_cleaning
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="dataId != null" >
        data_id,
      </if>
      <if test="dataType != null" >
        data_type,
      </if>
      <if test="dataTime != null" >
        data_time,
      </if>
      <if test="dataCount != null" >
        data_count,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="dataId != null" >
        #{dataId,jdbcType=INTEGER},
      </if>
      <if test="dataType != null" >
        #{dataType,jdbcType=INTEGER},
      </if>
      <if test="dataTime != null" >
        #{dataTime,jdbcType=VARCHAR},
      </if>
      <if test="dataCount != null" >
        #{dataCount,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.yxb.cms.domain.vo.DataCleaning" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 14:28:55 CST 2017.
    -->
    update cc_data_cleaning
    <set >
      <if test="dataType != null" >
        data_type = #{dataType,jdbcType=INTEGER},
      </if>
      <if test="dataTime != null" >
        data_time = #{dataTime,jdbcType=VARCHAR},
      </if>
      <if test="dataCount != null" >
        data_count = #{dataCount,jdbcType=INTEGER},
      </if>
    </set>
    where data_id = #{dataId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.yxb.cms.domain.vo.DataCleaning" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 14:28:55 CST 2017.
    -->
    update cc_data_cleaning
    set data_type = #{dataType,jdbcType=INTEGER},
      data_time = #{dataTime,jdbcType=VARCHAR},
      data_count = #{dataCount,jdbcType=INTEGER}
    where data_id = #{dataId,jdbcType=INTEGER}
  </update>
    <!-- 批量插入-->
    <insert id="insertDataCleanBatch">
        insert into cc_data_cleaning (data_type, data_time,data_count)
        values
        <foreach collection="list" item="item" index="index" separator=",">
            (
            #{item.dataType},
            #{item.dataTime},
            #{item.dataCount}
            )
        </foreach>
        ON DUPLICATE KEY UPDATE
        data_type = values(data_type),
        data_time = values(data_time),
        data_count = values(data_count)
    </insert>

    <!-- 查询用户访问量-->
    <select id="selectDataCleanListByLoginInfo" resultType="com.yxb.cms.domain.vo.DataCleaning">
        SELECT
            *
        FROM
            (
                SELECT
                    DATE_FORMAT(c.data_time, '%m/%d') AS dataTime,
                    c.data_count					  AS dataCount
                FROM cc_data_cleaning c
                WHERE c.data_type = 1
                ORDER BY c.data_time DESC
                LIMIT 10
            ) tt
        ORDER BY tt.dataTime
    </select>
    
</mapper>